server:
  port: 8080

spring:
  application:
    name: api-gateway

  cloud:
    config:
      enabled: false
      import-check:
        enabled: false

    gateway:
      server:
        webflux:
          routes:
            # 1. Microservicio de Libros
            - id: libros-service
              uri: http://localhost:8082
              predicates:
                - Path=/biblioteca/libros/**
              filters:
                - RewritePath=/biblioteca/libros(?<segment>.*), /api/libros${segment}

            # 2. Microservicio de Usuarios
            - id: usuarios-service
              uri: http://localhost:8081
              predicates:
                - Path=/biblioteca/usuarios/**
              filters:
                - RewritePath=/biblioteca/usuarios(?<segment>.*), /api/usuarios${segment}

            # 3. Microservicio de Pr√©stamos
            - id: prestamos-service
              uri: http://localhost:8083
              predicates:
                - Path=/biblioteca/prestamos/**
              filters:
                - RewritePath=/biblioteca/prestamos(?<segment>.*), /api/prestamos${segment}

# Desactivamos el cliente de Eureka para que no busque el puerto 8761
eureka:
  client:
    enabled: false